<p>
This page is not a catalog of everything PG can do. It is a short list of macros you will
actually see and use when writing PGML-first science problems.
</p>

<p>
<strong>Use this page when:</strong> a problem will not render, a widget is missing, or you are
adding a new interaction type.
</p>

<p>
This guide reflects the PG 2.17 subset used in ADAPT and webwork-pg-renderer. Some macros used in
online examples are missing in this subset, so check the allowlist before you add a new file to
<code>loadMacros()</code>.
</p>

<p>
For the full comparison table, see <code>docs/PG_MACRO_VERSION_COMPARISON.md</code>.
</p>

<h2>Copy and edit (minimal macro set)</h2>
<pre>
DOCUMENT();

loadMacros(
	"PGstandard.pl",
	"MathObjects.pl",
	"PGML.pl",
	"PGcourse.pl",
);
</pre>

<p><strong>Common failure and fix</strong></p>
<pre>
Broken: RadioButtons(...) without parserRadioButtons.pl
What you will see: Undefined subroutine &amp;main::RadioButtons called
Fix: add "parserRadioButtons.pl" to loadMacros()
</pre>

<h2>Core macros for PGML-first problems</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 22%;">
		<col style="width: 38%;">
		<col style="width: 40%;">
	</colgroup>
	<thead>
		<tr>
			<th>Macro</th>
			<th>What it enables</th>
			<th>What breaks if it is missing</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Macro">PGstandard.pl</td>
			<td data-th="What it enables">Core PG helpers and defaults.</td>
			<td data-th="What breaks if it is missing">Basic PG functions are undefined.</td>
		</tr>
		<tr>
			<td data-th="Macro">PGML.pl</td>
			<td data-th="What it enables">PGML blocks, formatting, and answer blanks.</td>
			<td data-th="What breaks if it is missing">PGML blocks fail or render as raw text.</td>
		</tr>
		<tr>
			<td data-th="Macro">PGcourse.pl</td>
			<td data-th="What it enables">Course-level helpers and defaults.</td>
			<td data-th="What breaks if it is missing">Course-specific helpers are undefined.</td>
		</tr>
		<tr>
			<td data-th="Macro">MathObjects.pl</td>
			<td data-th="What it enables">MathObjects: Real, Formula, Compute, Context.</td>
			<td data-th="What breaks if it is missing">Needed when using Real(), Compute(), Formula(), or Context(). Not required for RadioButtons or CheckboxList.</td>
		</tr>
	</tbody>
</table>
<p>
<strong>Note:</strong> MathObjects.pl is included in most science problems because they use numeric
answers with Real() or Compute(). For pure multiple-choice or matching problems that do not
compute numeric values, it can be omitted.
</p>

<h2>Add-ons by interaction type</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 34%;">
		<col style="width: 28%;">
		<col style="width: 38%;">
	</colgroup>
	<thead>
		<tr>
			<th>What students see</th>
			<th>Macro to load</th>
			<th>Notes</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="What students see">Single-choice questions (radio buttons)</td>
			<td data-th="Macro to load">parserRadioButtons.pl</td>
			<td data-th="Notes">Visible options, one correct choice.</td>
		</tr>
		<tr>
			<td data-th="What students see">Matching or shuffled lists</td>
			<td data-th="Macro to load">PGchoicemacros.pl</td>
			<td data-th="Notes">Matching and choice helpers.</td>
		</tr>
		<tr>
			<td data-th="What students see">Targeted feedback for common errors</td>
			<td data-th="Macro to load">answerHints.pl</td>
			<td data-th="Notes">Instructor-style feedback without extra widgets.</td>
		</tr>
	</tbody>
</table>

<h2>Macro availability (subset vs full PG)</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 36%;">
		<col style="width: 21%;">
		<col style="width: 21%;">
		<col style="width: 22%;">
	</colgroup>
	<thead>
		<tr>
			<th>Macro file</th>
			<th>ADAPT/renderer subset</th>
			<th>Full PG 2.17+</th>
			<th>PG 2.20</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Macro file">PGML.pl</td>
			<td data-th="ADAPT/renderer subset">Yes</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="PG 2.20">Yes</td>
		</tr>
		<tr>
			<td data-th="Macro file">MathObjects.pl</td>
			<td data-th="ADAPT/renderer subset">Yes</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="PG 2.20">Yes</td>
		</tr>
		<tr>
			<td data-th="Macro file">parserRadioButtons.pl</td>
			<td data-th="ADAPT/renderer subset">Yes</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="PG 2.20">Yes</td>
		</tr>
		<tr>
			<td data-th="Macro file">parserCheckboxList.pl</td>
			<td data-th="ADAPT/renderer subset">No</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="PG 2.20">Yes</td>
		</tr>
		<tr>
			<td data-th="Macro file">VectorListCheckers.pl</td>
			<td data-th="ADAPT/renderer subset">No</td>
			<td data-th="Full PG 2.17+">Yes</td>
			<td data-th="PG 2.20">Yes</td>
		</tr>
	</tbody>
</table>

<h2>Science-native contexts and grading helpers</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 34%;">
		<col style="width: 26%;">
		<col style="width: 40%;">
	</colgroup>
	<thead>
		<tr>
			<th>Use it when</th>
			<th>Macro to load</th>
			<th>Why it matters</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Use it when">Units are part of correctness</td>
			<td data-th="Macro to load">contextUnits.pl</td>
			<td data-th="Why it matters">Supports unit-aware parsing and validation.</td>
		</tr>
		<tr>
			<td data-th="Use it when">You need chemical reaction input</td>
			<td data-th="Macro to load">contextReaction.pl</td>
			<td data-th="Why it matters">Validates reactants/products and reaction structure.</td>
		</tr>
		<tr>
			<td data-th="Use it when">Multiple blanks depend on each other</td>
			<td data-th="Macro to load">parserMultiAnswer.pl</td>
			<td data-th="Why it matters">Ties related blanks to one checker.</td>
		</tr>
		<tr>
			<td data-th="Use it when">Parts should contribute different weights</td>
			<td data-th="Macro to load">weightedGrader.pl</td>
			<td data-th="Why it matters">Supports weighted scoring across parts.</td>
		</tr>
		<tr>
			<td data-th="Use it when">Order should not matter in a list</td>
			<td data-th="Macro to load">unorderedAnswer.pl</td>
			<td data-th="Why it matters">Grades set-style answers without order.</td>
		</tr>
	</tbody>
</table>

<h2>Tables, layouts, and visual tools</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 34%;">
		<col style="width: 26%;">
		<col style="width: 40%;">
	</colgroup>
	<thead>
		<tr>
			<th>Use it when</th>
			<th>Macro to load</th>
			<th>Why it matters</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Use it when">You need structured tables or aligned blanks</td>
			<td data-th="Macro to load">niceTables.pl / unionTables.pl</td>
			<td data-th="Why it matters">Keeps data displays clean and readable.</td>
		</tr>
		<tr>
			<td data-th="Use it when">You want scaffolded, multi-part prompts</td>
			<td data-th="Macro to load">scaffold.pl</td>
			<td data-th="Why it matters">Supports structured sections without custom logic.</td>
		</tr>
		<tr>
			<td data-th="Use it when">An interactive graph tool is required</td>
			<td data-th="Macro to load">parserGraphTool.pl</td>
			<td data-th="Why it matters">Provides interactive graph widgets.</td>
		</tr>
	</tbody>
</table>

<h2>Symptoms when missing</h2>
<table class="mt-responsive-table">
	<colgroup>
		<col style="width: 38%;">
		<col style="width: 32%;">
		<col style="width: 30%;">
	</colgroup>
	<thead>
		<tr>
			<th>Symptom</th>
			<th>Likely missing</th>
			<th>Fix</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td data-th="Symptom">PGML renders as raw text</td>
			<td data-th="Likely missing">PGML.pl</td>
			<td data-th="Fix">Load PGML.pl before BEGIN_PGML.</td>
		</tr>
		<tr>
			<td data-th="Symptom">Radio buttons do not appear</td>
			<td data-th="Likely missing">parserRadioButtons.pl</td>
			<td data-th="Fix">Add parserRadioButtons.pl to loadMacros().</td>
		</tr>
		<tr>
			<td data-th="Symptom">Checkbox list does not appear</td>
			<td data-th="Likely missing">parserCheckboxList.pl (not available)</td>
			<td data-th="Fix">Use per-statement RadioButtons or matching instead.</td>
		</tr>
		<tr>
			<td data-th="Symptom">MathObjects are undefined</td>
			<td data-th="Likely missing">MathObjects.pl</td>
			<td data-th="Fix">Load MathObjects.pl before using Real/Compute.</td>
		</tr>
	</tbody>
</table>

	<p>
	Local render shows the line and missing macro when ADAPT only reports a generic error (<a href="/@go/page/555731">Chapter 7</a>).
	</p>

<h2>Do not cargo-cult</h2>
<ul>
	<li>Remove macros you do not use and re-render.</li>
	<li>Load macros only once per file.</li>
	<li>Let dependencies load themselves; do not list everything "just in case."</li>
</ul>

<p><strong>Next, depending on what you are doing:</strong></p>
<ul>
	<li>Not sure where the macro block belongs? Go to Section 2.4.</li>
	<li>Need a clean starter .pg skeleton? Go to Section 2.3.</li>
	<li>Copied legacy code? Go to Section 2.6.</li>
</ul>
